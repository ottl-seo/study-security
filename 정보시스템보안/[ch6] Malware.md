# 6. Malware

# 1. **Introduction**

Malware == malicious software

### [ 악성코드 분류 방법 ]

여러가지 분류법이 있을 수 있다.

- **번식하는 방식에 따라서**
    1. 바이러스가 **기존 실행파일 감염**시킴
    2. 소프트웨어 **취약성 공격**
    3. **소셜 엔지니어링** (사람들 속이는 것 ex. 피싱)

- **악성코드의 행위(Payload)에 따라서**
    1. 시스템 또는 파일의 충돌
    2. 서비스 훔치기 (Theft of service): 좀비 에이전트를 이용해서,,,
    3. 정보 훔치기 (Theft of information): 키로거나 스파이웨어 이용하여, 비밀번호, 개인정보 등을 훔침
    4. **stealthing**: 루트킷처럼, 악성코드 탐지 못하도록 하는 악성코드...

- **의존성**에 따른 분류
    1. 호스트 프로그램을 필요로 하는 경우: virus
    2. 혼자서도 가능: 웜, 트로이목마, 봇...

- **복제 여부**에 따른 분류

    **O** : 바이러스, 웜...

    **X** : 트로이목마, 스팸 이메일 등.

---

## 2. Some **trends** in malwares

공격 키트 등장 - 악성코드 만드는 데에 프로그래밍 실력 필요 X, 만들기 쉬워짐...

### **< APT** (Advanced Persistent Threat) >

![https://blog.kakaocdn.net/dn/bI4w6t/btq3atTF9cJ/E9MQakJRrBZIrjJ9GTIexK/img.png](https://blog.kakaocdn.net/dn/bI4w6t/btq3atTF9cJ/E9MQakJRrBZIrjJ9GTIexK/img.png)

- APT란?

    : 타겟을 chosen 해두고 공격하며, 타겟이 타겟을 감염시키는 등 더 진화된 공격 방식.

- **APT 공격의 목적:**

    IP나 보안을 훔침. 데이터나 인프라 등 더 큰 범위의 내용 훔치는 것이 목적

    인프라를 물리적으로 다운시키거나...

    →  더 대응하기가 어려워졌다.

---

## 3. Propagation-**1) infected content**

**<번식 방법 1: 컨텐츠 감염>**

- 대표적인 예시- **바이러스
-** execuatable content를 감염시킨다 ex. 어플리케이션, 프로그램, PDF 문서 등.
- "**자기 복제**"가 특징

#### [structure] 바이러스의 구조

- **Infection mechanism**; 바이러스가 어떻게 전염되는가
- **Trigger**; 페이로드의 활성화 시기를 결정하는 조건
- **Payload**; 악성 행위. (복제 제외)

#### [Lifecycle]

잠복(Dormant) -> 번식(Propagation) -> **Triggering** -> 실행(Execution)

#### [countermeasure] *대응 방식*

- **codesigning** (코드 사이닝) : 사용자 인증할 때 전자서명 이용. 꽤 좋은 방식.
- 사용자에게 프로그램 수정 권한을 주지 않는다.

#### [macro&scripting virus]

- 스크립팅 언어는 어디에나 쓰이므로 더 감염 빠르다.
- 코드가 아니라 **문서를 감염**시킨다.
- 이메일 등을 통해 자동으로 열리기도.
- document 특성상 업데이트가 잦아서 접근 제어가 어렵다. (너무 쉽게 쓰이고 수정되기 때문에)

#### [바이러스 분류]

- - 숨기는 방식에 따라 4가지 분류

**1. 암호화된 바이러스(Encrypted)**

**2. 몰래 잠입하는 바이러스(Stealth)**

**3. 다형성 바이러스(Polymorphic)** //암호화와 다른점?

**4. 변이 바이러스(Metamorphic)**

---

## 4. Propagation-**2) vulnerability exploit**

<번식 방법 2: 취약점 공격>

***[outline]**
1) worm
2) mobile worms
3) drive-by-downloads
4) clickjacking*

### 1) **Worm**

#### [멀리 있는 시스템에 접근하는 수단] (Means to access remote systems)

- 전자 메일, 메신저
- 파일 공유 시 접근
- 파일 전송 시
- 로그인 시

#### [타겟을 정하는 방식, **Scanning** 4가지]

- **Random**: 랜덤 IP 주소로 접근
- **Hit-list**: 먼저 잠재적인 취약 시스템의 긴 목록을 컴파일하고 감염을 시작합니다.
- **Topological**: 감염된 호스트의 정보를 통해 다음 타깃 찾기
- **Local subnet**: 방화벽을 통해 로컬 네트워크에서 대상을 찾습니다.

#### [모리스 웜]

- 

#### [최신 웜 기술]

- **Multiplatform**; 여러 플랫폼을 공격함
- **Multi-exploit**; 웹 서버, 브라우저, 이메일, 파일 공유 시 등... 다양하게 접근
- **Ultrafast spreading**; 빠른 번식 속도
- **Polymorphic**; 다른 키를 사용하여 자체 암호화하여 모양 변경
- **Metamorphic**; 기능적으로 동등한 지시를 사용하여 즉시 생성된 새로운 코드
- **Transport vehicle**; 운송 수단이 다양화됨 (DDoS bots, 루트킷, 스파이웨어 등...)
- **Zero-day exploit**; 방금 게시된 취약성

### 2) **모바일** phone worms

바이러스, 웜 또는 트로이 목마를 사용자의 워크스테이션으로 전송하는 메커니즘의 역할을 합니다.

### 3) Client-side vulnerabilities and **drive-by-downloads**

- **Drive-by-download: 나도 모르는 사이에 다운로드 됨** - 브라우저 취약점 이용하여 악성코드 다운로드

(어도비, 자바 등 일단 다운 받으면 번식)

- **Watering-hole attack:** 타겟을 여러가지로 삼음
- **Malvertizing** : 광고 속에 악성코드를 심어두기

### 4) **Clickjacking**

- 유저들이 클릭하는 내용
- UI redress attack: 감염된 유저들의 클릭을 분석

ex. 투명 페이지 layer 겹쳐서, 패스워드 알아내기 등

---

## 5. Propagation-**3) Social engineering**

### 1) Spam 메일

인터넷에 대량 트래픽 만들어

### 2) 트로이목마

유용해보이는 프로그램 안에 악성코드 숨겨놓기

#### [모바일 폰 트로이목마]
- 
---

## 6. Payload

멀웨어의 일부

### 1) **시스템 충돌** (system corruption)

- 데이터 삭제 용도
- **Logic bomb**

일부 조건이 충족되면 '폭발' - 일부 손상(데이터 삭제, 기계 정지 원인)

### 2) **attack agent** (서비스 훔치기)

좀비 에이전트(Bot)를 이용해서,,,

- **Botnet**:

### 3) **information theft** (정보 훔치기)

비밀번호, 개인정보 등을 훔침

- **키로거**: 키보드 누른거 추적
- **스파이웨어:** 키 로깅, 캡처, 데이터 변경 등 보다 광범위한 작업 모니터링
- **피싱 (Phishing**): 사용자의 로그인 자격 증명을 캡처하는 가짜 웹 사이트

### 4) **stealthing**

악성코드 탐지 못하도록 하는 악성코드...

- **루트킷**: 직접적으로 악성코드의 효과를 내진 않지만, 이후의 다른 악성코드가 성공적으로 작동할 수 있게 환경을 구성해주는 역할을 한다.
- **백도어**: 백도어는 컴퓨터 내에서 일종의 **“비밀 통로”** 역할을 한다고 볼 수 있다.

암호화 시스템이나 알고리즘 인증을 몰래 통과하고 접속하여 시스템을 통제할 수 있도록 하며, 사용자가 이를 발견할 수 없게 로그를 남기지 않는 것이 특징.
